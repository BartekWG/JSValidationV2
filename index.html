<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Formularz - Walidacja JS</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <div class="formDiv">
        <h2>Please provide your details below</h2>
        <hr>
        <form name="formularz" onsubmit="return fselect()">
            <div class="form-group">
                <label for="name">Your name and surname: </label>
                <input type="text" class="form-control" id="name" placeholder="Enter your name" name="name"
                        required>
            </div>
            <div class="form-group">
                <label for="email">Email: </label>
                <input type="text" class="form-control" id="email" placeholder="Enter your email" name="email"
                        required>
            </div>
            <div class="form-group">
                <label for="name">Phone: </label>
                <input type="text" class="form-control" id="phone" placeholder="Enter your phone" name="phone"
                       onchange="fphone(this)" required>
            </div>
            <div class="form-group">
                <label for="subject">Subject: </label>
                <select class="custom-select w-100" id="subject" name="subject" onchange="fselect()" required>
                    <option selected disabled hidden value="">Choose from list!</option>
                    <option value="suggestion">Send us your suggestion</option>
                    <option value="complaint">Send us your complaint</option>
                </select>
            </div>
            <div class="form-group">
                <label for="message">Message: </label>
                <textarea class="form-control" name="message" id="message" placeholder="Type your message here..."
                          rows="3" maxlength="1000" required></textarea>
            </div>
            <button type="submit" class="btn btn-default" value="submit">Submit</button>
        </form>
    </div>
</div>

<script type="text/javascript">
    "use strict";
    (function(){
        function fselect() {
            if (document.formularz.subject.value === "") {
                alert("Choose subject from list!");
                document.formularz.subject.focus();
                return false;
            }
        }

        function fname(event) {
            console.log(event);
            let name = document.formularz.name.value;
            let pattern = /^[A-Z]{1}[a-z]{2,15} (([A-Z]{1}[a-z]{2,20}-[A-Z]{1}[a-z]{2,20})|([A-Z]{1}[a-z]{2,20}))$/;

            if (!pattern.test(name)) {
                this.style.border = '3px solid red';
                alert("Niewłaściwy format! Format właściwy: Jan Kowalski lub Jan Maria-Kowalski");
                this.value = "";
//                    document.formularz.name.focus();
                return false;
            } else {
                this.style.border = '3px solid green';
            }
        }

        function femail(el) {
            let email = document.formularz.email.value;
            let pattern = /^[0-9a-z]{1}([0-9a-z])*\.?([0-9a-z])*@([0-9a-z])+\.([0-9a-z])+$/;

            if (!pattern.test(email)) {
                el.style.border = '3px solid red';
                alert("Niewłaściwy format email!");
                document.getElementById("email").value = "";
                document.formularz.email.focus();
                return false;
            } else {
                el.style.border = '3px solid green';
            }
        }

        function fphone(el) {
            let phone = document.formularz.phone.value;
            let pattern = /^\d{9}$/;

            if (!pattern.test(phone)) {
                el.style.border = '3px solid red';
                alert("Niewłaściwy format!");
                document.getElementById("phone").value = "";
                document.formularz.phone.focus();
                return false;
            } else {
                el.style.border = '3px solid green';
            }
        }


        document.getElementById("name").addEventListener('change', fname);
//        window.addEventListener('DOMContentLoaded', function() {
//            const elements = document.querySelector('#name');
//
//            for (let i=0; i<elements.length; i++){
//                elements[i].addEventListener('blur', fname);
//            }
//        });
    })();
</script>
</body>
</html>